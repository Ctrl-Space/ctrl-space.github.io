---
layout: post
title: 《图解HTTP》- 第8章-确认访问用户身份的认证
category: 计算机基础
date: 2015-01-31
---


##第8章     确认访问用户身份的认证     
>某些Web页面只想让特定的人浏览，或者干脆仅本人可见。    
为达到这个目标，必不可少的就是认证功能。    
下面我们一起来学习一下认证机制。     

<!-- more -->    


###8.1 何为认证     

>为了确认客户端是否真的具有访问系统的权限，就需要核对“登陆者本人才知道的信息”、“登录者本人才会有的信息”。     
核对的信息通常是指以下这些：     

- 密码：只有本人才会知道的字符串信息。  
- 数字令牌：仅限本人持有的设备内显示的一次性密码。  
- 数字证书：仅限本人（终端）持有的信息。  
- 生物认证：指纹和虹膜等本人的生理信息。  
- IC卡等：仅限本人持有的信息。     

####HTTP使用的认证方式     

HTTP/1.1 使用的认证方式如下所示。      

- BASIC 认证（基本认证）   
- DIGEST 认证（摘要认证）   
- SSL 客户端认证   
- FormBase 认证（基于表单认证）     


###8.2 BASIC 认证      

>####BASIC 认证的认证步骤     

>1. 客户端发送访问请求     
>2. 服务器返回状态码401以告知客户端需要进行认证     
>3. 客户端将用户ID和密码以Base64方式编码后发送     
>4. 认证成功则返回状态码200，若认证失败则返回状态码401     

**缺点**   

- BASIC 认证虽然采用Base64 编码方式，但这不是加密处理。     
- 想再进行一次BASIC 认证时，一般的浏览器却无法实现认证注销操作。     
- BAISC 认证使用上不够便捷灵活，且达不到多数Web网站期望的安全性等级，因此它并不常用。    

###8.3 DIGEST 认证     

>####DIGEST 认证的认证步骤     

>1. 客户端发送访问请求     
>2. 服务器发送临时的质询码（随机数，nonce）以及告知需要认证的状态码401     
>3. 客户端发送摘要以及由质询码计算出的响应码（response）     
>4. 认证成功则返回状态码200，若认证失败则返回状态码401           
   
**缺点**    

- DIGEST 认证提供了高于 BASIC 认证的安全等级，但是和HTTPS的客户端认证相比仍旧很弱。     
- DIGEST 认证提供了防止密码被窃听的保护机制，但并不存在防止用户伪装的保护机制。     
- DIGEST 认证和BASIC 认证一样，使用上不那么便捷灵活，且仍达不到多数Web网站对高度安全等级的追求标准。因此它的适用范围也有所受限。     


###8.4 SSL 客户端认证     

- SSL 客户端认证可以避免用户的ID和密码被盗后被第三者冒充的情况。     
- SSL 客户端认证是借由HTTPS的客户端证书完成认证的方式。     



>####SSL 客户端认证的认证步骤     

>1. 客户端必须事先安装服务器分发给客户端的客户端证书。          
>2. 接收到需要认证资源的请求，服务器发送Certificate Resuest 报文，要求客户端提供客户端证书。     
>3. 用户将客户端证书信息以Client Certificate 报文方式发送给服务器。          
>4. 服务器验证客户端证书验证通过后方可领取客户端的公开密钥，然后开始HTTPS加密通信。    
 
 
>#### SSL 客户端认证采用双因素认证     
>在认证过程中不仅需要密码这一因素，还需要申请认证者所提供的其它持有信息，从而作为另一个因素，与其组合使用的认证方式。     


>#### SSL 客户端认证必要的费用     
>从认证机构购买客户端证书的费用，以及服务器运营者为保证自己搭建的认证机构安全运营所产生的费用。     

### 8.5 基于表单认证     

>基于表单的认证方法并不是在HTTP协议中定义的。     

####认证多半为基于表单认证    
>由于使用上的便利性及安全性问题，HTTP协议标准提供的 BASIC 认证和 DIGEST 认证几乎不怎么使用。    另外，使用 SSL 客户端认证虽然具有高度的安全等级，但因为导入及维修费用等问题，还尚未普及。    

#### Session 管理及 Cookie 应用   

>基于表单认证的标准规范尚未有定论，一般会使用 Cookie 来管理 Session （会话）。    
>鉴于 HTTP 是无状态协议，之前已认证成功的用户状态无法通过协议层面保存下来。即，无法实现状态管理，因此即使当该用户下一次继续访问，也无法区分他与其他的用户。于是我们会使用 Cookie 来管理 Session ，以弥补 HTTP 协议中不存在的状态管理功能。    

>#### 步骤   
>1. 用户发送已登录信息（将ID、密码等信息放入报文的实体部分，通常是以 POST 方法把请求发送给服务器）   
>2. 服务器向用户发放Session ID，记录认证状态    
>3. 用户发送包含Session ID 的 Cookie 
>4. 服务器通过验证 Session ID 来判断对方是否真实用户    




